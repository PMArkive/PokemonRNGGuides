import{u as C,bz as y,a$ as j,R as b,j as s,c as h,z as l,bB as F,bC as P,a as d,b as v,t as D,bD as M,i as R,B as I}from"./index-DXZ5ShUP.js";import{R as B}from"./rngToolForm-B4hBWdo1.js";import{p as V,d as z,c as A,e as G}from"./pkmFilter-Dut2CP0u.js";import{g as $,f as N}from"./ivColumns-Co1n9lOk.js";import{a as O}from"./statRange-CwxZmFOq.js";import{u as H}from"./useBatchedTool-DMRJ-dEy.js";import"./ivs-DDKKiU8r.js";const L=(e,t)=>{const a=[];for(let n=e.hp;n<=t.hp;n+=10)for(let c=e.atk;c<=t.atk;c+=10)for(let o=e.def;o<=t.def;o+=10)for(let i=e.spa;i<=t.spa;i+=10)for(let m=e.spd;m<=t.spd;m+=10)for(let u=e.spe;u<=t.spe;u+=10)a.push([{hp:n,atk:c,def:o,spa:i,spd:m,spe:u},{hp:Math.min(t.hp,n+9),atk:Math.min(t.atk,c+9),def:Math.min(t.def,o+9),spa:Math.min(t.spa,i+9),spd:Math.min(t.spd,m+9),spe:Math.min(t.spe,u+9)}]);return a},U=({target:e})=>{const[,t]=R(),[,a]=y();return s.jsx(I,{trackerId:"select_gen4_starter",onClick:()=>{a(n=>({...n,target:e})),t(n=>n+1)},children:"Select"})},Y=l.object({tid:l.number().int().min(0).max(65535),sid:l.number().int().min(0).max(65535),year:l.number().int().min(2e3).max(2100),species:l.enum(M),min_delay:l.number().int().min(0),max_delay:l.number().int().min(0),platinum_target_advance:l.number().int().min(0),force_second:l.number().int().min(0).max(59).nullable()}).merge(G),f={tid:0,sid:0,year:2e3,species:"Turtwig",min_delay:600,max_delay:1e3,platinum_target_advance:4,force_second:null,...z()},q={...f,species:"Chikorita"},E=({species:e,game:t,platinum_target_advance:a})=>h({species:e,game:t}).with({game:"Platinum"},()=>a).with({game:"Diamond"},()=>0).with({game:"Pearl"},()=>0).with({species:"Chikorita"},()=>0).with({species:"Cyndaquil"},()=>4).with({species:"Totodile"},()=>8).otherwise(()=>0),K=e=>[{title:e.Select,dataIndex:"key",render:(t,a)=>s.jsx(U,{target:a})},{title:e.Shiny,dataIndex:"shiny",render:t=>t?"Yes":"No"},{title:e.Nature,dataIndex:"nature"},{title:e.Ability,dataIndex:"ability"},{title:e.Gender,dataIndex:"gender"},...$(e),{title:e.PID,dataIndex:"pid",monospace:!0,render:t=>t.toString(16).padStart(8,"0").toUpperCase()},{title:e.Delay,dataIndex:"delay"},{title:e.Second,dataIndex:"second"},{title:e.Seed,dataIndex:"seed",monospace:!0,render:t=>t.toString(16).padStart(8,"0").toUpperCase()}],W=(e,t)=>{const a=h(e).with("Diamond","Pearl","Platinum",()=>F).with("HeartGold","SoulSilver",()=>P).exhaustive();return[{label:t.TID,input:s.jsx(d,{name:"tid",numType:"decimal"})},{label:t.SID,input:s.jsx(d,{name:"sid",numType:"decimal"})},{label:t.Year,input:s.jsx(d,{name:"year",numType:"decimal"})},{label:t["Min Delay"],input:s.jsx(d,{name:"min_delay",numType:"decimal"})},{label:t["Max Delay"],input:s.jsx(d,{name:"max_delay",numType:"decimal"})},{hide:e!=="Platinum",label:t["Target Advance"],input:s.jsx(d,{name:"platinum_target_advance",numType:"decimal"})},{label:t.Species,input:s.jsx(v,{name:"species",options:D(a)})},...A({},t),{label:t["Force Second"],input:s.jsx(d,{name:"force_second",numType:"decimal"})}]},J=e=>({...N(e),key:`${e.seed_time.seed}-${e.pid}`,second:e.seed_time.datetime.second,seed:e.seed_time.seed,delay:e.seed_time.delay}),ie=()=>{const e=C(),[t,a]=y(),{run:n,data:c,cancel:o}=H(j.search_static4_method1_seeds,{map:J}),i=t.game,m=b.useCallback(async r=>{const x=await O(r.species,[5,6]);a(p=>({...p,species:r.species,minMaxStats:x}));const _=E({game:i,species:r.species,platinum_target_advance:r.platinum_target_advance}),S={...r,min_advance:_,max_advance:_,force_second:r.force_second,filter:V(r)},T=L(r.filter_min_ivs,r.filter_max_ivs).map(([p,w])=>({...S,filter:{...S.filter,min_ivs:p,max_ivs:w}}));await n(T)},[i,a,n]),{fields:u,columns:g}=b.useMemo(()=>({fields:W(i,e),columns:K(e)}),[i,e]),k=h(i).with("Diamond","Pearl","Platinum",()=>f).with("HeartGold","SoulSilver",()=>q).exhaustive();return s.jsx(B,{fields:u,columns:g,results:c,initialValues:k,validationSchema:Y,onSubmit:m,rowKey:"key",submitTrackerId:"search_gen4_starters",allowCancel:!0,cancelTrackerId:"cancel_gen4_starters",submitButtonLabel:e.Generate,cancelButtonLabel:e.Cancel,onCancel:o})};export{ie as PickStarter4};
