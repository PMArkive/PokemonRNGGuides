import{k as u,y,C as b,j as a,S as T,z as S,R as c,O as _,P as D,E as g,Z as f,G as s,J as p,b as j,a as i}from"./index-DXZ5ShUP.js";import{R as x}from"./rngToolForm-B4hBWdo1.js";import{G as h}from"./gen4Timer-TbF8X6Ni.js";const m=D(),k=S.object({console:p,minTimeMs:s,calibratedDelay:s,calibratedSeconds:s,targetDelay:s,targetSeconds:s,delayHit:f(s)}),G={console:"NdsSlot1",minTimeMs:14e3,calibratedDelay:500,calibratedSeconds:14,targetDelay:600,targetSeconds:50,delayHit:null},H=y("gen4TimerSettings",k,G),I=[{label:"Console",input:a.jsx(j,{name:"console",options:[{label:"NDS - Slot 1",value:"NdsSlot1"},{label:"DSI",value:"Dsi"},{label:"3DS",value:"ThreeDs"}]})},{label:"Min Time (ms)",input:a.jsx(i,{name:"minTimeMs",numType:"float"})},{label:"Calibrated Delay",input:a.jsx(i,{name:"calibratedDelay",numType:"float"})},{label:"Calibrated Seconds",input:a.jsx(i,{name:"calibratedSeconds",numType:"float"})},{label:"Target Delay",input:a.jsx(i,{name:"targetDelay",numType:"float"})},{label:"Target Seconds",input:a.jsx(i,{name:"targetSeconds",numType:"float"})},{label:"Delay Hit",input:a.jsx(i,{name:"delayHit",numType:"float"})}],M=({timerSettings:e,onUpdate:r})=>{const o=c.useRef(!1),{initTimer:l}=_(m);c.useEffect(()=>{o.current||(o.current=!0,l({console:e.console,min_time_ms:e.minTimeMs,calibrated_delay:e.calibratedDelay,calibrated_second:e.calibratedSeconds,target_delay:e.targetDelay,target_second:e.targetSeconds}))},[l,e]);const d=c.useCallback(async t=>{const n=await l({calibrated_delay:t.calibratedDelay,calibrated_second:t.calibratedSeconds,console:t.console,min_time_ms:t.minTimeMs,target_delay:t.targetDelay,target_second:t.targetSeconds,hit_delay:t.delayHit});r(g({calibratedDelay:n.timer.calibrated_delay,calibratedSeconds:n.timer.calibrated_second,console:n.timer.console,delayHit:null,minTimeMs:n.timer.min_time_ms,targetDelay:n.timer.target_delay,targetSeconds:n.timer.target_second}))},[l,r]);return a.jsx(h,{selfInit:!1,timer:m,trackerId:"mystic_timer_gen4",is3ds:e.console==="ThreeDs",fields:a.jsx(x,{fields:I,initialValues:e,onSubmit:d,submitTrackerId:"set_gen4_timer",submitButtonLabel:"Set Timer"})})},F=()=>{const[e,r]=u(H),{hydrated:o,client:l}=b(e);return o?a.jsx(M,{timerSettings:l,onUpdate:r}):a.jsx(T,{})};export{F as Gen4Timer};
