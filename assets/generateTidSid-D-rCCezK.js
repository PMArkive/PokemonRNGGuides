import{j as s,g as D,R as c,a as p,M as g,r as S,F as h,z as I}from"./index-DXZ5ShUP.js";import{R as x}from"./rngToolForm-B4hBWdo1.js";const R=I.object({offset:I.number().int().min(-999).max(999),tid:I.number().int().min(0).max(65535)}),E={offset:50,tid:0},i=["Perfect","Very good","Good","Acceptable","So-so","Bad","Very bad"],v=t=>`Redo Step 1 to generate a new easier TID (~${t}% chance that each new TID is significately better)`,M="Keep that TID and go to Step 2.",y=t=>t==="emerald"?1410:1633,F=30,j=[{title:"TID/SID advance",dataIndex:"tid_gen_adv",render:(t,n)=>{const e=t-n.tid_gen_target_adv;return e===0?`${t}`:e>0?`${t} (+${e})`:`${t} (${e})`}},{title:"SID",dataIndex:"sid"},{title:"Earliest Method-1 advance for shiny starter",dataIndex:"earliest_shiny_adv",render:t=>{const n=(t/59.7275/60).toFixed(1);return`${t} (~${n} min)`}}],A=({result:t})=>{const n=Math.round(t.avg_adv_to_determine_sid/59.7275/60),e=t.avg_adv_to_determine_sid_percentile,_=e<=2?i[0]:e<=5?i[1]:e<=10?i[2]:!t.should_improve_tid||e<=15?i[3]:e<=25?i[4]:e<=50?i[5]:i[6],r=`~${n+F} min (${_})`,a=t.should_improve_tid?v(e):M,o=[{label:"Estimated time to determine SID for obtained TID:",input:r},{label:"Recommendation:",input:a}];return s.jsx(D,{fields:o})},O=({game:t})=>{const n=y(t),e=c.useCallback((T,l)=>{const d=(()=>{const u=l.offset,m=n-u;let f=Math.round(m*1e3/59.7275);return f<0&&(f=0),[5e3,f]})();return[{label:"Offset",input:s.jsx(p,{name:"offset",numType:"decimal"})},{label:"TID/SID Timer",direction:"column",input:s.jsx(g,{milliseconds:d,startButtonTrackerId:"start_gen3_shiny_starter_tidsid_timer",stopButtonTrackerId:"stop_gen3_shiny_starter_tidsid_timer"})},{label:"Obtained TID",input:s.jsx(p,{name:"tid",numType:"decimal"})}]},[n]),[_,r]=c.useState([]),[a,o]=c.useState(null),b=c.useCallback(async T=>{const l=t==="emerald"?0:1440,d=await S.gen3_calculate_tidsid_shiny_for_tid(l,n,T.tid),u=d.nearby_sids.map(m=>({...m,tid_gen_target_adv:n}));o(d),r(u)},[t,n,o,r]);return s.jsxs(h,{vertical:!0,children:[s.jsx(x,{results:_,getFields:e,columns:j,validationSchema:R,initialValues:E,submitButtonLabel:"Generate possible SIDs",submitTrackerId:"generate_tid_sid_for_shiny_starter",onSubmit:b}),a!=null&&s.jsx(A,{result:a})]})};export{O as GenerateHoennTidSid,A as GenerateTidSidRating};
