import{Q as x,R as i,r as u,j as a,z as l,a as d,H as S,T as f}from"./index-DXZ5ShUP.js";import{R as m}from"./rngToolForm-B4hBWdo1.js";import{r as h,b,a as j,d as R,R as D,c as p,e as g}from"./time-BOoSCwJO.js";import{F as y,a as k}from"./datePicker-DTCRJDFL.js";var T=0;function C(e){var t=++T;return x(e)+t}const I=[{title:"Seed",dataIndex:"seed",monospace:!0,render:e=>e.toString(16).toUpperCase().padStart(8,"0")},{title:"Date/Time",dataIndex:"datetime",render:e=>R(e,{seconds:!0})},{title:"Delay",dataIndex:"delay"},{title:"Coin Flips",dataIndex:"coin_flips",render:e=>e.map(t=>t==="Heads"?"H":"T").join(", ")}],F=l.object({date:p,time:D,delay:l.number().int().min(0),delay_calibration:l.number().int().min(0),second_calibration:l.number().int().min(0)}),H=[{label:"Searcher Result Date",input:a.jsx(y,{name:"date",disabled:!0})},{label:"Searcher Result Time",input:a.jsx(k,{name:"time",showSecond:!0,disabled:!0})},{label:"Searcher Result Delay",input:a.jsx(d,{name:"delay",disabled:!0,numType:"decimal"})},{label:"Delay Calibration +/-",input:a.jsx(d,{name:"delay_calibration",numType:"decimal"})},{label:"Second Calibration +/-",input:a.jsx(d,{name:"second_calibration",numType:"decimal"})}],v=({selectedSeedTime:e})=>{const[t,r]=i.useState([]),o=(e==null?void 0:e.seed)??0,s=i.useMemo(()=>e==null?{date:b(),time:h(),delay:0,delay_calibration:0,second_calibration:0}:{date:e.datetime,time:e.datetime,delay:e.delay,delay_calibration:0,second_calibration:0},[e]),c=i.useCallback(async n=>{const _=await u.dppt_calibrate_seedtime({seed:o,datetime:j(n.date,n.time),delay:n.delay,coin_flips:[]},{delay_calibration:n.delay_calibration,second_calibration:n.second_calibration,entei_route:null,lati_route:null,raikou_route:null});r(_)},[o]);return a.jsx(m,{fields:H,columns:I,results:t,initialValues:s,validationSchema:F,onSubmit:c,submitTrackerId:"calibrate_dppt_seed"})},w=[{title:"Date",dataIndex:"datetime",render:e=>g(e).toDate().toLocaleString()},{title:"Delay",dataIndex:"delay"},{title:"Coin Flips",dataIndex:"coin_flips",render:e=>e.map(t=>t==="Heads"?"H":"T").join(", ")}],V=l.object({seed:S(4294967295),date:p,forced_second:l.number().int().min(0).nullable()}),M={seed:0,date:b(),forced_second:null},$=[{label:"Seed",input:a.jsx(d,{name:"seed",numType:"hex"})},{label:"Year/Month",input:a.jsx(y,{name:"date",picker:"month"})},{label:"Forced Second",input:a.jsx(d,{name:"forced_second",numType:"decimal"})}],K=({onClickResultRow:e})=>{const[t,r]=i.useState([]),o=i.useCallback(async s=>{const c=await u.dppt_calculate_seedtime({...s,year:s.date.year,month:s.date.month,delay_range:null,find_first:!1,second_range:null});r(c.map(n=>({...n,id:C()})))},[]);return a.jsx(m,{fields:$,columns:w,results:t,initialValues:M,validationSchema:V,onSubmit:o,onClickResultRow:e,rowKey:"id",submitTrackerId:"dppt_seed_search"})},E=()=>{const[e,t]=i.useState(null),r=i.useMemo(()=>[{key:"seedSearch",label:"Search",children:a.jsx(K,{onClickResultRow:t})},{key:"seedCalibrate",label:"Calibrate",children:a.jsx(v,{selectedSeedTime:e})}],[e]);return a.jsx(f,{defaultActiveKey:"seedSearch",items:r})};export{E as DpptSeed};
