import{k as y,R as p,y as _,C as x,j as e,S as k,z as o,r as g,D as d,E as T,F as j,M as H,b as v,a as r,Z as f,G as s,J as D,c as B,p as M,K as I,L as G,T as $}from"./index-DXZ5ShUP.js";import{R as h}from"./rngToolForm-B4hBWdo1.js";import{Gen4Timer as w}from"./gen4-B0BUVIGq.js";import"./gen4Timer-TbF8X6Ni.js";const C=n=>{const[i,m]=y(n);return{initialSettings:p.useRef(i).current,onUpdate:m}},A=o.object({milliseconds:o.array(o.number()),minutesBeforeTarget:o.number()}),F=_("gen3Timer",A,{milliseconds:[],minutesBeforeTarget:0}),N=o.object({console:D,preTimer:s,targetFrame:s,calibration:s,frameHit:f(s)}),V={console:"Gba",preTimer:5e3,targetFrame:1e3,calibration:0,frameHit:null},E=_("gen3TimerSettings",N,V),R=[{label:"Console",input:e.jsx(v,{name:"console",options:[{label:"GBA",value:"Gba"},{label:"NDS - Slot 2",value:"NdsSlot2"},{label:"NDS - Slot 1",value:"NdsSlot1"},{label:"DSI",value:"Dsi"},{label:"3DS",value:"ThreeDs"}]})},{label:"Pre-Timer",input:e.jsx(r,{name:"preTimer",numType:"float"})},{label:"Target Frame",input:e.jsx(r,{name:"targetFrame",numType:"float"})},{label:"Calibration",input:e.jsx(r,{name:"calibration",numType:"float"})},{label:"Frame Hit",input:e.jsx(r,{name:"frameHit",numType:"float"})}],L=({timer:n,setTimer:i,initialSettings:m,onUpdate:l})=>{const c=p.useCallback(async(a,S)=>{let u=a,t={console:a.console,pre_timer:a.preTimer,target_frame:a.targetFrame,calibration:a.calibration};a.frameHit!=null&&(t=await g.calibrate_gen3_timer(t,a.frameHit),t={console:a.console,pre_timer:d(t.pre_timer),target_frame:d(t.target_frame),calibration:d(t.calibration)},u={console:t.console,preTimer:t.pre_timer,targetFrame:t.target_frame,calibration:t.calibration,frameHit:null},S.setValues(u));const b=await g.create_gen3_timer(t);i(T({milliseconds:[...b],minutesBeforeTarget:await g.minutes_before(b)})),l(T(u))},[l,i]);return e.jsxs(j,{vertical:!0,gap:12,children:[e.jsx(H,{startButtonTrackerId:"start_gen3_timer",stopButtonTrackerId:"stop_gen3_timer",milliseconds:n.milliseconds,minutesBeforeTarget:n.minutesBeforeTarget}),e.jsx(h,{fields:R,initialValues:m,onSubmit:c,submitTrackerId:"set_gen3_timer",submitButtonLabel:"Set Timer"})]})},P=()=>{const{initialSettings:n,onUpdate:i}=C(E),[m,l]=y(F),{hydrated:c,client:a}=x({initialSettings:n,timer:m});return c?e.jsx(L,{...a,setTimer:l,onUpdate:i}):e.jsx(k,{})},O=o.object({milliseconds:o.array(o.number()),minutesBeforeTarget:o.number()}),z=_("gen5StandardTimer",O,{milliseconds:[],minutesBeforeTarget:0}),Z=o.object({console:D,minTimeMs:s,targetSecond:s,calibration:s,secondHit:f(s)}),K={console:"NdsSlot1",minTimeMs:14e3,targetSecond:50,calibration:-95,secondHit:null},J=_("gen5StandardTimerSettings",Z,K),U=[{label:"Console",input:e.jsx(v,{name:"console",options:[{label:"NDS - Slot 1",value:"NdsSlot1"},{label:"DSI",value:"Dsi"},{label:"3DS",value:"ThreeDs"}]})},{label:"Min Time (ms)",input:e.jsx(r,{name:"minTimeMs",numType:"float"})},{label:"Target Second",input:e.jsx(r,{name:"targetSecond",numType:"float"})},{label:"Calibration",input:e.jsx(r,{name:"calibration",numType:"float"})},{label:"Second Hit",input:e.jsx(r,{name:"secondHit",numType:"float"})}],W=({timer:n,setTimer:i,initialSettings:m,onUpdate:l})=>{const c=p.useCallback(async(a,S)=>{let u=a,t={console:a.console,min_time_ms:a.minTimeMs,target_second:a.targetSecond,calibration:a.calibration};a.secondHit!=null&&(t=await g.calibrate_gen5_standard_timer(t,a.secondHit),t={console:a.console,min_time_ms:d(t.min_time_ms),target_second:d(t.target_second),calibration:d(t.calibration)},u={console:t.console,minTimeMs:t.min_time_ms,targetSecond:t.target_second,calibration:t.calibration,secondHit:null},S.setValues(u));const b=await g.create_gen5_standard_timer(t);i(T({milliseconds:[...b],minutesBeforeTarget:await g.minutes_before(b)})),l(T(u))},[l,i]);return e.jsxs(j,{vertical:!0,gap:12,children:[e.jsx(H,{startButtonTrackerId:"start_gen5_standard_timer",stopButtonTrackerId:"stop_gen5_standard_timer",milliseconds:n.milliseconds,minutesBeforeTarget:n.minutesBeforeTarget}),e.jsx(h,{fields:U,initialValues:m,onSubmit:c,submitTrackerId:"set_gen5_standard_timer",submitButtonLabel:"Set Timer"})]})},q=()=>{const{initialSettings:n,onUpdate:i}=C(J),[m,l]=y(z),{hydrated:c,client:a}=x({initialSettings:n,timerState:m});return c?e.jsx(W,{timer:a.timerState,setTimer:l,initialSettings:a.initialSettings,onUpdate:i}):e.jsx(k,{})},Q=o.object({milliseconds:o.array(o.number()),minutesBeforeTarget:o.number()}),X=_("gen5CGearTimer",Q,{milliseconds:[],minutesBeforeTarget:0}),Y=o.object({console:D,minTimeMs:s,targetDelay:s,targetSecond:s,calibration:s,delayHit:f(s)}),ee={console:"NdsSlot1",minTimeMs:14e3,targetDelay:1200,targetSecond:50,calibration:-95,delayHit:null},te=_("gen5CGearTimerSettings",Y,ee),ae=[{label:"Console",input:e.jsx(v,{name:"console",options:[{label:"NDS - Slot 1",value:"NdsSlot1"},{label:"DSI",value:"Dsi"},{label:"3DS",value:"ThreeDs"}]})},{label:"Min Time (ms)",input:e.jsx(r,{name:"minTimeMs",numType:"float"})},{label:"Target Delay",input:e.jsx(r,{name:"targetDelay",numType:"float"})},{label:"Target Second",input:e.jsx(r,{name:"targetSecond",numType:"float"})},{label:"Calibration",input:e.jsx(r,{name:"calibration",numType:"float"})},{label:"Delay Hit",input:e.jsx(r,{name:"delayHit",numType:"float"})}],ne=({timer:n,setTimer:i,initialSettings:m,onUpdate:l})=>{const c=p.useCallback(async(a,S)=>{let u=a,t={console:a.console,min_time_ms:a.minTimeMs,target_delay:a.targetDelay,target_second:a.targetSecond,calibration:a.calibration};a.delayHit!=null&&(t=await g.calibrate_gen5_cgear_timer(t,a.delayHit),t={console:a.console,min_time_ms:d(t.min_time_ms),target_delay:d(t.target_delay),target_second:d(t.target_second),calibration:d(t.calibration)},u={console:t.console,minTimeMs:t.min_time_ms,targetDelay:t.target_delay,targetSecond:t.target_second,calibration:t.calibration,delayHit:null},S.setValues(u));const b=await g.create_gen5_cgear_timer(t);i(T({milliseconds:[...b],minutesBeforeTarget:await g.minutes_before(b)})),l(T(u))},[l,i]);return e.jsxs(j,{vertical:!0,gap:12,children:[e.jsx(H,{startButtonTrackerId:"start_gen5_cgear_timer",stopButtonTrackerId:"stop_gen5_cgear_timer",milliseconds:n.milliseconds,minutesBeforeTarget:n.minutesBeforeTarget}),e.jsx(h,{fields:ae,initialValues:m,onSubmit:c,submitTrackerId:"set_gen5_cgear_timer",submitButtonLabel:"Set Timer"})]})},ie=()=>{const{initialSettings:n,onUpdate:i}=C(te),[m,l]=y(X),{hydrated:c,client:a}=x({initialSettings:n,timer:m});return c?e.jsx(ne,{...a,setTimer:l,onUpdate:i}):e.jsx(k,{})},le=o.object({milliseconds:o.array(o.number()),minutesBeforeTarget:o.number()}),re=_("gen5EntralinkTimer",le,{milliseconds:[],minutesBeforeTarget:0}),se=o.object({console:D,minTimeMs:s,targetDelay:s,targetSecond:s,calibration:s,entralinkCalibration:s,delayHit:f(s),secondHit:f(s)}),oe={console:"NdsSlot1",minTimeMs:14e3,targetDelay:1200,targetSecond:50,calibration:-95,entralinkCalibration:256,delayHit:null,secondHit:null},me=_("gen5EntralinkTimerSettings",se,oe),ce=[{label:"Console",input:e.jsx(v,{name:"console",options:[{label:"NDS - Slot 1",value:"NdsSlot1"},{label:"DSI",value:"Dsi"},{label:"3DS",value:"ThreeDs"}]})},{label:"Min Time (ms)",input:e.jsx(r,{name:"minTimeMs",numType:"float"})},{label:"Target Delay",input:e.jsx(r,{name:"targetDelay",numType:"float"})},{label:"Target Second",input:e.jsx(r,{name:"targetSecond",numType:"float"})},{label:"Calibration",input:e.jsx(r,{name:"calibration",numType:"float"})},{label:"Entralink Calibration",input:e.jsx(r,{name:"entralinkCalibration",numType:"float"})},{label:"Delay Hit",input:e.jsx(r,{name:"delayHit",numType:"float"})},{label:"Second Hit",input:e.jsx(r,{name:"secondHit",numType:"float"})}],de=({timer:n,setTimer:i,initialSettings:m,onUpdate:l})=>{const c=p.useCallback(async(a,S)=>{let u=a,t={console:a.console,min_time_ms:a.minTimeMs,target_delay:a.targetDelay,target_second:a.targetSecond,calibration:a.calibration,entralink_calibration:a.entralinkCalibration};a.secondHit!=null&&a.delayHit!=null&&(t=await g.calibrate_gen5_entralink_timer(t,a.secondHit,a.delayHit),t={console:a.console,min_time_ms:d(t.min_time_ms),target_delay:d(t.target_delay),target_second:d(t.target_second),calibration:d(t.calibration),entralink_calibration:d(t.entralink_calibration)},u={console:t.console,minTimeMs:t.min_time_ms,targetDelay:t.target_delay,targetSecond:t.target_second,calibration:t.calibration,entralinkCalibration:t.entralink_calibration,delayHit:null,secondHit:null},S.setValues(u));const b=await g.create_gen5_entralink_timer(t);i(T({milliseconds:[...b],minutesBeforeTarget:await g.minutes_before(b)})),l(T(u))},[l,i]);return e.jsxs(j,{vertical:!0,gap:12,children:[e.jsx(H,{startButtonTrackerId:"start_gen5_entralink_timer",stopButtonTrackerId:"stop_gen5_entralink_timer",milliseconds:n.milliseconds,minutesBeforeTarget:n.minutesBeforeTarget}),e.jsx(h,{fields:ce,initialValues:m,onSubmit:c,submitTrackerId:"set_gen5_entralink_timer",submitButtonLabel:"Set Timer"})]})},ue=()=>{const{initialSettings:n,onUpdate:i}=C(me),[m,l]=y(re),{hydrated:c,client:a}=x({initialSettings:n,timer:m});return c?e.jsx(de,{...a,setTimer:l,onUpdate:i}):e.jsx(k,{})},ge=o.object({milliseconds:o.array(o.number()),minutesBeforeTarget:o.number()}),be=_("gen5EntralinkPlusTimer",ge,{milliseconds:[],minutesBeforeTarget:0}),Te=o.object({console:D,minTimeMs:s,targetDelay:s,targetSecond:s,targetAdvance:s,calibration:s,entralinkCalibration:s,frameCalibration:s,delayHit:f(s),secondHit:f(s),advanceHit:f(s)}),_e={console:"NdsSlot1",minTimeMs:14e3,targetDelay:1200,targetSecond:50,targetAdvance:100,calibration:-95,entralinkCalibration:256,frameCalibration:0,delayHit:null,secondHit:null,advanceHit:null},Se=_("gen5EntralinkPlusTimerSettings",Te,_e),fe=[{label:"Console",input:e.jsx(v,{name:"console",options:[{label:"NDS - Slot 1",value:"NdsSlot1"},{label:"DSI",value:"Dsi"},{label:"3DS",value:"ThreeDs"}]})},{label:"Min Time (ms)",input:e.jsx(r,{name:"minTimeMs",numType:"float"})},{label:"Target Delay",input:e.jsx(r,{name:"targetDelay",numType:"float"})},{label:"Target Second",input:e.jsx(r,{name:"targetSecond",numType:"float"})},{label:"Target Advance",input:e.jsx(r,{name:"targetAdvance",numType:"float"})},{label:"Calibration",input:e.jsx(r,{name:"calibration",numType:"float"})},{label:"Entralink Calibration",input:e.jsx(r,{name:"entralinkCalibration",numType:"float"})},{label:"Frame Calibration",input:e.jsx(r,{name:"frameCalibration",numType:"float"})},{label:"Delay Hit",input:e.jsx(r,{name:"delayHit",numType:"float"})},{label:"Second Hit",input:e.jsx(r,{name:"secondHit",numType:"float"})},{label:"Advance Hit",input:e.jsx(r,{name:"advanceHit",numType:"float"})}],ye=({timer:n,setTimer:i,initialSettings:m,onUpdate:l})=>{const c=p.useCallback(async(a,S)=>{let u=a,t={console:a.console,min_time_ms:a.minTimeMs,target_delay:a.targetDelay,target_second:a.targetSecond,target_advances:a.targetAdvance,calibration:a.calibration,entralink_calibration:a.entralinkCalibration,frame_calibration:a.frameCalibration};a.secondHit!=null&&a.delayHit!=null&&a.advanceHit!=null&&(t=await g.calibrate_gen5_entralink_plus_timer(t,a.secondHit,a.delayHit,a.advanceHit),t={console:a.console,min_time_ms:d(t.min_time_ms),target_delay:d(t.target_delay),target_second:d(t.target_second),target_advances:d(t.target_advances),calibration:d(t.calibration),entralink_calibration:d(t.entralink_calibration),frame_calibration:d(t.frame_calibration)},u={console:t.console,minTimeMs:t.min_time_ms,targetDelay:t.target_delay,targetSecond:t.target_second,targetAdvance:t.target_advances,calibration:t.calibration,entralinkCalibration:t.entralink_calibration,frameCalibration:t.frame_calibration,delayHit:null,secondHit:null,advanceHit:null},S.setValues(u));const b=await g.create_gen5_entralink_plus_timer(t);i(T({milliseconds:[...b],minutesBeforeTarget:await g.minutes_before(b)})),l(T(u))},[l,i]);return e.jsxs(j,{vertical:!0,gap:12,children:[e.jsx(H,{startButtonTrackerId:"start_gen5_entralink_plus_timer",stopButtonTrackerId:"stop_gen5_entralink_plus_timer",milliseconds:n.milliseconds,minutesBeforeTarget:n.minutesBeforeTarget}),e.jsx(h,{fields:fe,initialValues:m,onSubmit:c,submitTrackerId:"set_gen5_entralink_plus_timer",submitButtonLabel:"Set Timer"})]})},je=()=>{const{initialSettings:n,onUpdate:i}=C(Se),[m,l]=y(be),{hydrated:c,client:a}=x({initialSettings:n,timer:m});return c?e.jsx(ye,{...a,setTimer:l,onUpdate:i}):e.jsx(k,{})},xe=o.enum(["standard","cgear","entralink","entralink_plus"]),ke=_("gen5TimerMode",o.object({mode:xe}),{mode:"standard"}),pe=()=>{const[n,i]=y(ke),{hydrated:m,client:l}=x(n);if(!m)return e.jsx(k,{});const c=B(l.mode).with("standard",()=>e.jsx(q,{})).with("cgear",()=>e.jsx(ie,{})).with("entralink",()=>e.jsx(ue,{})).with("entralink_plus",()=>e.jsx(je,{})).exhaustive();return e.jsxs(j,{vertical:!0,gap:32,children:[e.jsxs(j,{gap:16,align:"center",children:[e.jsx(M.Text,{strong:!0,children:"Mode"}),e.jsx(I,{fullFlex:!0,value:l.mode,name:"gen5-timer-mode",onChange:a=>i(T({mode:a})),options:[{label:"Standard",value:"standard"},{label:"C-Gear",value:"cgear"},{label:"Entralink",value:"entralink"},{label:"Entralink+",value:"entralink_plus"}]})]}),c]})},He=G(k.Node)({"&& .ant-skeleton-image":{width:"100%",height:300,borderRadius:20}}),ve=o.object({activeTab:o.string()}),De=_("rngTimerTabState",ve,{activeTab:"gen3"}),he=[{key:"gen5",label:"Gen 5",forceRender:!0,children:e.jsx(pe,{})},{key:"gen4",label:"Gen 4",forceRender:!0,children:e.jsx(w,{})},{key:"gen3",label:"Gen 3",forceRender:!0,children:e.jsx(P,{})}],Ge=()=>{const[n,i]=y(De),{hydrated:m,client:l}=x(n);return m?e.jsx($,{activeKey:l.activeTab,onTabClick:c=>i(T({activeTab:c})),items:he}):e.jsx(He,{})};export{Ge as RngTimer};
