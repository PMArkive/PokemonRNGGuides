import{s as v,R as c,j as t,B as x,r as f,z as n,a as d}from"./index-DXZ5ShUP.js";import{R as b}from"./rngToolForm-B4hBWdo1.js";import{u as p,c as T}from"./useGen3Timer-D-oFIk24.js";import{d as I}from"./id-Bad5r4ra.js";import{u as l}from"./rsTidState-BEn0oPKc.js";import{G as j}from"./gen3Timer-Ip2_9jlj.js";const R=({hitAdvance:e,timer:s})=>{const[i,r]=v.useMessage(),{calibrate:a}=p(s),o=c.useCallback(async()=>{await a(e),i.success("Calibrated timer")},[a,e,i]);return t.jsxs(t.Fragment,{children:[r,t.jsx(x,{trackerId:"calibrate_obtained_retail_tid",onClick:o,children:"Calibrate"})]})},u=T(),h=[{title:"Calibrate",dataIndex:"advance",render:(e,s)=>t.jsx(R,{hitAdvance:s.advance,timer:u})},{title:"Offset",dataIndex:"offset"},{title:"TID",dataIndex:"tid"},{title:"SID",dataIndex:"sid"},{title:"TSV",dataIndex:"tsv"}],g=n.object({offset:n.number().int().min(0),initial_advances:n.number().int().min(0),max_advances:n.number().int().min(0),hit_tid:n.number().int().min(0).max(65535)}),y={initial_advances:0,max_advances:1e4,offset:0,hit_tid:0},A=[{label:"Initial Advances",input:t.jsx(d,{name:"initial_advances",numType:"decimal"})},{label:"Max Advances",input:t.jsx(d,{name:"max_advances",numType:"decimal"})},{label:"Hit TID",input:t.jsx(d,{name:"hit_tid",numType:"decimal"})}],G=()=>{const[e]=l();return t.jsx(j,{trackerId:"retail_tid_timer",targetAdvance:e.targetAdvance,timer:u})},w=()=>{const[e,s]=c.useState([]),[i]=l(),r=c.useCallback(async a=>{const _=(await f.gen3_tidsid_states({offset:a.offset,initial_advances:a.initial_advances,max_advances:a.max_advances,version_options:{Rs:"DeadBattery"},filter:I({type:"tid",value0:a.hit_tid,value1:null})})).map(m=>({...m,offset:i.targetAdvance-m.advance}));s(_)},[i]);return t.jsx(b,{fields:A,columns:h,results:e,initialValues:y,validationSchema:g,onSubmit:r,submitTrackerId:"search_rs_tidsid",rowKey:"advance"})};export{w as RsTidSearcher,G as RsTidTimer};
