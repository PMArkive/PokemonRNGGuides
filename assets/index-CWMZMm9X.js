import{r as b,R as c,j as s,z as x,a as v,f as I,t as _,b as M,F as h,p as k,B as $,I as A,b2 as R,g as T,b3 as C,M as P}from"./index-DXZ5ShUP.js";import{R as j}from"./rngToolForm-B4hBWdo1.js";import{g as y,a as D}from"./statRange-CwxZmFOq.js";import{n as w,b as B,S as N,i as O}from"./pkmFilter-Dut2CP0u.js";import{g as E}from"./statFields-BqJvJlc9.js";import"./id-Bad5r4ra.js";import"./species-Be9kh-u_.js";import"./ivs-DDKKiU8r.js";import"./range-BOnWQYcW.js";const L=500,z=async(i,t,n)=>{if(t<0||t>65535||n<0||n>65535)return null;const e=i==="emerald"?0:1440;return b.gen3_earliest_shiny_starter_adv(e,t,n)},G=async(i,t,n)=>{const e={offset:0,initial_advances:t,max_advances:0,seed:i==="emerald"?0:1440,method4:!1,filter:{nature:null,gender:null,ability:null,shiny:!1,stats:null,min_ivs:{hp:0,atk:0,def:0,spa:0,spd:0,spe:0},max_ivs:{hp:31,atk:31,def:31,spa:31,spd:31,spe:31}},tid:0,sid:0,bugged_roamer:!1,species:n},l=await b.gen3_static_generator_states(e);if(l.length===0)return"";const a=l[0],o=await b.calculate_stats(y(n),5,a.nature,a.ivs,{hp:0,atk:0,def:0,spa:0,spd:0,spe:0});return`${a.gender}, ${a.nature}, HP ${o.hp}, ATK ${o.atk}, DEF ${o.def}, SPA ${o.spa}, SPD ${o.spd}, SPE ${o.spe}`},g=(i,t,{min:n,max:e})=>t>=n&&t<=e?t:i?n:e,H=async(i,t,n,e)=>{const{species:l,minMaxStats:a}=n,[o,u]=[!0,!1].map(r=>({hp:g(r,e.hpStat,a.hp),atk:g(r,e.atkStat,a.atk),def:g(r,e.defStat,a.def),spa:g(r,e.spaStat,a.spa),spd:g(r,e.spdStat,a.spd),spe:g(r,e.speStat,a.spe)})),m={offset:0,initial_advances:Math.max(t-3e3,L),max_advances:6e3,seed:i==="emerald"?0:1440,method4:!1,filter:{nature:e.nature??null,gender:e.gender??null,ability:null,shiny:!1,stats:{lvl:5,base_stats:y(l),min_stats:o,max_stats:u},min_ivs:{hp:0,atk:0,def:0,spa:0,spd:0,spe:0},max_ivs:{hp:31,atk:31,def:31,spa:31,spd:31,spe:31}},tid:0,sid:0,bugged_roamer:!1,species:l},d=(await b.gen3_static_generator_states(m)).map(r=>({advance:r.advance,targetAdvance:t}));return d.sort((r,p)=>{const f=Math.abs(r.targetAdvance-r.advance),F=Math.abs(p.targetAdvance-p.advance);return f-F}),d.slice(0,10)},K=x.object({tid:x.number().int().min(0).max(65535),sid:x.number().int().min(0).max(65535)}),U={tid:0,sid:0},q=[{label:"TID",input:s.jsx(v,{name:"tid",numType:"decimal"})},{label:"SID",input:s.jsx(v,{name:"sid",numType:"decimal"})}],W=({game:i,setTargetAdvance:t})=>{const n=c.useCallback(async e=>{const l=await z(i,e.tid,e.sid);l!==null&&t(l)},[t,i]);return s.jsx(j,{fields:q,initialValues:U,validationSchema:K,submitTrackerId:"findTarget",submitButtonLabel:"Calculate Target advance",onSubmit:n})},J=x.object({nature:x.enum(B),gender:x.enum(["Male","Female"])}).merge(N),Q={hpStat:0,atkStat:0,defStat:0,spaStat:0,spdStat:0,speStat:0,nature:"Adamant",gender:"Male"},X=({game:i,targetAdvance:t,targetStarter:n,setLatestHitAdv:e})=>{const[l,a]=c.useState([]),o=c.useCallback(async d=>{a(await H(i,t,n,d))},[i,t,n,a]),u=c.useMemo(()=>[{title:"Target",dataIndex:"targetAdvance"},{title:"Advance",dataIndex:"advance",render:(r,p)=>{const f=r-p.targetAdvance;return f===0?`${r}`:f>0?`${r} (+${f})`:`${r} (${f})`}},{title:"",dataIndex:"advance",render(r,p){return p.advance===p.targetAdvance?"Shiny if correct SID":s.jsxs($,{type:"text",color:"PrimaryText",trackerId:"shinyStarter_adv",onClick:()=>{e(r),a([])},children:[s.jsx(A,{name:"Update",size:20})," Update Calibration"]})}}],[e,a]),{minMaxStats:m}=n,S=c.useMemo(()=>[{label:"Gender",input:s.jsx(I,{name:"gender",options:_(["Male","Female"])})},{label:"Nature",input:s.jsx(M,{name:"nature",options:w.required})},...E(m)],[m]);return s.jsxs(h,{vertical:!0,gap:8,children:[s.jsx(k.Title,{level:5,p:0,m:0,children:"Caught Pokémon"}),s.jsx(j,{fields:S,columns:u,results:l,initialValues:Q,validationSchema:J,onSubmit:o,submitTrackerId:"generate_gen3_caught_starter",submitButtonLabel:"Find advances matching caught starter Pokémon",rowKey:"advance"})]})},Y=({game:i,targetAdvance:t,targetStarter:n,setTargetStarter:e})=>{const[l,a]=c.useState(""),o=c.useMemo(()=>[{label:"Starter",input:s.jsx(R,{optionType:"button",onChange:async({target:u})=>{e({species:u.value,minMaxStats:await D(u.value)});const m=await G(i,t,n.species);a(m)},options:_(["Mudkip","Torchic","Treecko"])})},{label:"Info",input:l}],[i,t,n,l,e]);return s.jsxs(h,{vertical:!0,gap:8,flex:1,children:[s.jsx(k.Title,{level:5,p:0,m:0,children:"Target Pokemon"}),s.jsx(T,{fields:o})]})},ot=({game:i})=>{const[t,n]=c.useState(0),[e,l]=c.useState({species:"Mudkip",minMaxStats:O}),[a,o]=c.useState(12),u=c.useMemo(()=>{const d=t-a;return[5e3,Math.round(d*1e3/59.7275)]},[t,a]),m=c.useMemo(()=>[{label:"Target advance",input:s.jsx(s.Fragment,{children:t})},{label:"Calibration + Offset",input:s.jsx(C,{name:"offset",onChange:d=>{const r=Number(d.target.value);o(Number.isFinite(r)?r:0)},value:a})}],[t,a]),S=c.useCallback(d=>{o(a+d-t)},[t,a,o]);return s.jsxs(h,{gap:32,vertical:!0,children:[s.jsx(W,{game:i,setTargetAdvance:n}),t!==0&&s.jsxs(s.Fragment,{children:[s.jsx(T,{fields:m}),s.jsx(P,{milliseconds:u,startButtonTrackerId:"start_gen3_shiny_starter_timer",stopButtonTrackerId:"stop_gen3_shiny_starter_timer"}),s.jsx(Y,{game:i,targetAdvance:t,targetStarter:e,setTargetStarter:l}),s.jsx(X,{game:i,targetAdvance:t,targetStarter:e,setLatestHitAdv:S})]})]})};export{ot as ShinyHoennStarter};
