import{u as q,bz as B,R as c,j as r,f as b,t as v,b as k,r as C,q as H,z as i,bA as P,I as $,c as N}from"./index-DXZ5ShUP.js";import{R as V}from"./rngToolForm-B4hBWdo1.js";import{f as p,C as E}from"./offsetSymbol-BhtzUnCn.js";import{n as K,b as L,S as U}from"./pkmFilter-Dut2CP0u.js";import{g as J}from"./statRange-CwxZmFOq.js";import"./id-Bad5r4ra.js";import{m as Q,a as W}from"./ivs-DDKKiU8r.js";import"./species-Be9kh-u_.js";import{g as X}from"./statFields-BqJvJlc9.js";import{p as Y}from"./index-DYfrB5EN.js";import{C as Z,c as tt}from"./gen4types-CyDqMwGv.js";import{k as et,e as at}from"./time-BOoSCwJO.js";import{GetStarter4 as jt}from"./getStarter-6P3e44yF.js";import{PickStarter4 as Ft}from"./pickStarter-Cfn3isZh.js";import{Starter4Setup as Tt}from"./setup-smfrhMJ6.js";import"./useGen3Timer-D-oFIk24.js";import"./range-BOnWQYcW.js";import"./gen4Timer-TbF8X6Ni.js";import"./consoleDateStrings-Btz7ppdC.js";import"./ivColumns-Co1n9lOk.js";import"./useBatchedTool-DMRJ-dEy.js";import"./consoleSelect-DnTx5hfH.js";const O=["Male","Female"],st=i.object({level:i.number().int().min(1).max(100),nature:i.enum(L),gender:i.enum(O),filter_characteristic:i.enum(tt)}).merge(U),rt={level:5,hpStat:0,atkStat:0,defStat:0,spaStat:0,spdStat:0,speStat:0,nature:"Adamant",gender:"Male",filter_characteristic:"AlertToSounds"},nt=t=>[{title:t.Calibrate,dataIndex:"key",render:(e,l)=>r.jsx(E,{type:"gen4",hitDelay:l.delay,timer:P,trackerId:"calibrate_gen4_starter",previousStepOnClick:!0})},{title:t["Delay Offset"],dataIndex:"delayOffset",render:p},{title:t["Advance Offset"],dataIndex:"advanceOffset",render:p},{title:t["Second Offset"],dataIndex:"secondOffset",render:p},{title:t["Flip Delay"],dataIndex:"flipDelay",render:e=>e?r.jsx($,{name:"CheckCircle",color:"Success",size:30}):null},{title:t.Seed,dataIndex:"seed",monospace:!0,render:e=>e.toString(16).padStart(8,"0").toUpperCase()},{title:t.Second,dataIndex:"second"}],it={day:1,month:1,year:2e3,hour:0,minute:0,second:0},ot=t=>N(t).with("Turtwig",()=>"Diamond").with("Chimchar",()=>"Diamond").with("Piplup",()=>"Diamond").with("Chikorita",()=>"HeartGold").with("Cyndaquil",()=>"HeartGold").with("Totodile",()=>"HeartGold").exhaustive(),wt=()=>{var S,g,h;const t=q(),[e]=B(),[l,D]=c.useState([]),d=((S=e.target)==null?void 0:S.seed_time.datetime)??it,n=((g=e.target)==null?void 0:g.seed_time.delay)??0,m=((h=e.target)==null?void 0:h.advance)??0,o=e.species,f=e.minMaxStats,I=c.useMemo(()=>[{label:t.Gender,input:r.jsx(b,{name:"gender",options:v(O)})},{label:t.Nature,input:r.jsx(k,{name:"nature",options:K.required})},{label:t.Characteristic,input:r.jsx(k,{name:"filter_characteristic",options:Z})},{label:t.Level,input:r.jsx(b,{name:"level",options:v([5,6])})},...X(f,t)],[f,t]),w=c.useMemo(()=>nt(t),[t]),M=c.useCallback(async s=>{const R=Math.max(n-500,0),j=n+500,A=J(o),x={hp:s.hpStat,atk:s.atkStat,def:s.defStat,spa:s.spaStat,spd:s.spdStat,spe:s.speStat},F=et(at(d).subtract(1,"seconds")),G=await C.calc_gen4_seeds({datetime:F,seconds_increment:2,min_delay:R,max_delay:j}),y=e.game==="Platinum"?40:20,T=await Y(G,async a=>(await C.generate_static4_states({tid:0,sid:0,initial_advances:Math.max(m-y/2,0),max_advances:y,game:ot(o),encounter:o,lead:"None",seed:a.seed,filter_characteristic:s.filter_characteristic,filter:{shiny:!1,ability:null,min_ivs:W,max_ivs:Q,nature:s.nature,gender:s.gender,stats:{lvl:s.level,base_stats:A,min_stats:x,max_stats:x}}})).map(u=>{const _=a.datetime.second-d.second;return{...u,seed:a.seed,delay:a.delay,advanceOffset:u.advance-m,flipDelay:_%2===0&&n%2!==a.delay%2,key:`${a.seed}-${u.pid}`,delayOffset:a.delay-n,second:a.datetime.second,secondOffset:_}})),z=H(T.flat(),[a=>Math.abs(a.advanceOffset),a=>Math.abs(a.delayOffset)]);D(z)},[m,n,d,o,e.game]);return r.jsx(V,{fields:I,columns:w,results:l,initialValues:rt,validationSchema:st,onSubmit:M,rowKey:"key",submitTrackerId:"calibrate_gen4_starter"})};export{wt as CalibrateStarter4,jt as GetStarter4,Ft as PickStarter4,Tt as Starter4Setup};
